{"meta":{"title":"Shiaoming的技术博客","subtitle":"记录学习，分享生活","description":"专注于前端开发、Node.js、GitHub等技术分享的个人博客","author":"Shiaoming","url":"https://shiaoming123.github.io","root":"/"},"pages":[{"title":"关于我","date":"2026-01-20T02:33:08.000Z","updated":"2026-01-20T04:19:33.062Z","comments":true,"path":"about/index.html","permalink":"https://shiaoming123.github.io/about/index.html","excerpt":"","text":"👋 你好！我是 Shiaoming📖 简介欢迎来到我的个人技术博客！这是一位热爱技术、喜欢分享的前端开发者的学习记录站。 💻 技术栈 前端开发: HTML5, CSS3, JavaScript, Vue.js, React 后端技术: Node.js, Express 工具: Git, GitHub, Hexo, VS Code 其他: 正在持续学习和探索中… 🎯 博客内容在这个博客中，你会找到： 🔧 技术教程: 分享开发过程中遇到的问题和解决方案 📚 学习笔记: 记录学习新技术的历程和心得 🚀 项目实战: 展示个人项目和开发经验 💡 经验总结: 反思和总结技术成长路上的点点滴滴 📮 联系方式 GitHub: Shiaoming123 Email: 2405360475@qq.com B站: 时昊Ming 知乎: 时昊 微信: Hen18175566208 🌟 建站初衷 “纸上得来终觉浅，绝知此事要躬行” 创建这个博客的初衷是为了： 记录学习历程，巩固所学知识 分享技术经验，帮助他人少走弯路 结识志同道合的朋友，一起交流进步 培养持续写作的习惯，提升表达能力 感谢你的来访，希望我的文章对你有所帮助！如果有任何问题或建议，欢迎通过邮件或 GitHub 联系我。 © 2025 Shiaoming的技术博客 | 用心记录，持续成长"},{"title":"分类","date":"2026-01-20T04:24:25.000Z","updated":"2026-01-20T04:24:46.367Z","comments":true,"path":"categories/index.html","permalink":"https://shiaoming123.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2026-02-12T02:56:45.647Z","updated":"2026-02-12T02:56:45.647Z","comments":true,"path":"css/custom.css","permalink":"https://shiaoming123.github.io/css/custom.css","excerpt":"","text":"/* build time:Thu Feb 12 2026 14:31:36 GMT+0800 (中国标准时间)*/ .feature-banner{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;padding:32px;border-radius:16px;margin:32px 0;box-shadow:0 8px 32px rgba(102,126,234,.3);text-align:center}.feature-banner h2{margin:0 0 16px 0;font-size:28px;font-weight:700}.feature-banner p{margin:0;font-size:16px;opacity:.95}.guide-step{background:#f8f9fa;border-left:4px solid #49b1f5;padding:20px;margin:20px 0;border-radius:8px;transition:all .3s ease}.guide-step:hover{box-shadow:0 4px 16px rgba(73,177,245,.2);transform:translateY(-2px)}.guide-step strong{color:#49b1f5;font-size:18px;display:block;margin-bottom:8px}.tip-box{background:#e3f2fd;border-left:4px solid #536dfe;padding:16px;margin:20px 0;border-radius:8px}.tip-box::before{content:\"💡 提示\";display:block;font-weight:700;margin-bottom:8px;color:#536dfe}.warning-box{background:#fff3e0;border-left:4px solid #ffa726;padding:16px;margin:20px 0;border-radius:8px}.warning-box::before{content:\"⚠️ 注意\";display:block;font-weight:700;margin-bottom:8px;color:#ffa726}.info-box{background:#e3f2fd;border-left:4px solid #3f51b5;padding:16px;margin:20px 0;border-radius:8px}.info-box::before{content:\"ℹ️ 信息\";display:block;font-weight:700;margin-bottom:8px;color:#3f51b5}.feature-demo-img{width:100%;max-width:800px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.1);margin:20px auto;display:block}.feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:32px 0}.feature-card{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:all .3s ease}.feature-card:hover{box-shadow:0 8px 24px rgba(0,0,0,.12);transform:translateY(-4px)}.feature-card h3{margin:0 0 12px 0;color:#333}.feature-card p{color:#666;line-height:1.6;margin:0}.video-tutorial{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;margin:20px 0;box-shadow:0 4px 16px rgba(0,0,0,.1)}.video-tutorial iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}.download-btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,#49b1f5,#00c4b6);color:#fff;padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:500;transition:all .3s ease;box-shadow:0 4px 12px rgba(73,177,245,.3)}.download-btn:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(73,177,245,.4)}.code-snippet{background:#282c34;color:#abb2bf;padding:20px;border-radius:8px;font-family:'Fira Code',Consolas,monospace;overflow-x:auto;margin:16px 0;position:relative}.code-snippet::before{content:attr(data-language);position:absolute;top:0;right:0;background:#3e4451;color:#abb2bf;padding:4px 12px;border-radius:0 8px 0 8px;font-size:12px}.welcome-banner{background:linear-gradient(135deg,#ffeaa7,#fdcb6e);color:#2d3436;padding:24px;border-radius:12px;margin:20px 0;display:flex;align-items:center;gap:16px}.welcome-banner .emoji{font-size:48px}.welcome-banner .content{flex:1}.welcome-banner h3{margin:0 0 8px 0;font-size:20px}@media (max-width:768px){.feature-banner{padding:20px}.feature-banner h2{font-size:22px}.feature-grid{grid-template-columns:1fr}.guide-step{padding:16px}.welcome-banner{flex-direction:column;text-align:center}.welcome-banner .emoji{font-size:36px}} /* rebuild by neat */"},{"title":"","date":"2026-01-20T02:29:44.180Z","updated":"2026-01-20T02:29:44.180Z","comments":true,"path":"images/README.html","permalink":"https://shiaoming123.github.io/images/README.html","excerpt":"","text":"博客图片资源头像设置请将您的头像图片命名为 avatar.png 或 avatar.jpg 并放置在此目录下。 建议头像尺寸：200x200 像素或更大，正方形为佳。 在线头像生成工具推荐： UI Avatars - 文字头像 Avatar Maker - 自定义头像 也可以使用自己的照片 其他图片博客文章中使用的图片也可以放在此目录，通过 /images/图片名.jpg 引用。"},{"title":"","date":"2026-02-11T09:07:40.628Z","updated":"2026-02-11T09:07:40.628Z","comments":true,"path":"js/enhanced-search.js","permalink":"https://shiaoming123.github.io/js/enhanced-search.js","excerpt":"","text":"/** * 增强搜索组件 * 支持标签过滤、排序、搜索建议 */ class EnhancedSearch { constructor() { this.searchData = []; this.activeFilters = { tags: [], categories: [], series: [] }; this.sortBy = 'relevance'; // relevance, date, rating, reading_time this.searchHistory = this.getSearchHistory(); this.currentQuery = ''; } /** * 初始化搜索功能 */ async init() { // 加载搜索数据 try { const response = await fetch('/search.xml'); const text = await response.text(); this.searchData = this.parseSearchXML(text); console.log('Search data loaded:', this.searchData.length, 'entries'); } catch (error) { console.error('Failed to load search data:', error); } // 绑定搜索框事件 this.bindEvents(); } /** * 解析 search.xml */ parseSearchXML(xmlText) { const parser = new DOMParser(); const xmlDoc = parser.parseFromString(xmlText, 'text/xml'); const entries = xmlDoc.querySelectorAll('entry'); return Array.from(entries).map(entry => { const allTags = entry.querySelector('tags')?.textContent || ''; const allCategories = entry.querySelector('categories')?.textContent || ''; return { title: entry.querySelector('title')?.textContent || '', content: entry.querySelector('content')?.textContent || '', url: entry.querySelector('url')?.textContent || '', tags: allTags ? allTags.split(',').map(t => t.trim()) : [], categories: allCategories ? allCategories.split(',').map(c => c.trim()) : [], date: entry.querySelector('date')?.textContent || '', wordCount: parseInt(entry.querySelector('word_count')?.textContent || '0'), readingTime: parseInt(entry.querySelector('reading_time')?.textContent || '0'), series: entry.querySelector('series')?.textContent || null }; }); } /** * 绑定事件监听器 */ bindEvents() { const searchInput = document.querySelector('.search-input') || document.getElementById('search-input'); if (searchInput) { // 搜索输入事件（防抖） let debounceTimer; searchInput.addEventListener('input', (e) => { clearTimeout(debounceTimer); debounceTimer = setTimeout(() => { this.handleSearch(e.target.value); }, 300); }); // 回车键搜索 searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { this.handleSearch(e.target.value); } }); } // 绑定过滤器按钮 this.bindFilterEvents(); } /** * 绑定过滤器事件 */ bindFilterEvents() { // 检查是否已有过滤器 UI，没有则创建 if (!document.querySelector('.search-filters')) { this.createFilterUI(); } } /** * 创建过滤器 UI */ createFilterUI() { const searchContainer = document.querySelector('.search-box') || document.querySelector('#content-hexo-blog-search'); if (!searchContainer) return; const filterHTML = ` 标签过滤 排序方式 相关度 发布日期 阅读时长 `; searchContainer.insertAdjacentHTML('beforeend', filterHTML); // 填充热门标签 this.populatePopularTags(); // 绑定排序选择事件 document.getElementById('sort-select').addEventListener('change', (e) => { this.sortBy = e.target.value; if (this.currentQuery) { this.handleSearch(this.currentQuery); } }); } /** * 填充热门标签 */ populatePopularTags() { // 统计所有标签的使用频率 const tagCounts = {}; this.searchData.forEach(item => { item.tags.forEach(tag => { tagCounts[tag] = (tagCounts[tag] || 0) + 1; }); }); // 取前 20 个热门标签 const sortedTags = Object.entries(tagCounts) .sort((a, b) => b[1] - a[1]) .slice(0, 20); const filterTagsContainer = document.getElementById('filter-tags'); filterTagsContainer.innerHTML = sortedTags.map(([tag, count]) => ` ${tag} (${count}) ` ).join(''); // 绑定标签点击事件 filterTagsContainer.querySelectorAll('.filter-tag').forEach(tagEl => { tagEl.addEventListener('click', () => { const tag = tagEl.getAttribute('data-tag'); this.toggleTagFilter(tag); }); }); } /** * 切换标签过滤器 */ toggleTagFilter(tag) { const index = this.activeFilters.tags.indexOf(tag); if (index > -1) { this.activeFilters.tags.splice(index, 1); document.querySelector(`.filter-tag[data-tag=\"${tag}\"]`)?.classList.remove('active'); } else { this.activeFilters.tags.push(tag); document.querySelector(`.filter-tag[data-tag=\"${tag}\"]`)?.classList.add('active'); } if (this.currentQuery) { this.handleSearch(this.currentQuery); } } /** * 处理搜索 */ handleSearch(query) { this.currentQuery = query.trim(); if (!this.currentQuery) { this.showAllResults(); return; } // 保存到搜索历史 this.saveToSearchHistory(this.currentQuery); // 执行搜索 const results = this.search(query); // 显示结果 this.displayResults(results); } /** * 搜索算法 */ search(query) { const lowerQuery = query.toLowerCase(); return this.searchData.filter(item => { // 必须匹配所有激活的过滤器 if (!this.matchesFilters(item)) return false; // 计算相关度分数 const score = this.calculateRelevance(item, lowerQuery); return score > 0; }).sort((a, b) => { return this.sortResults(a, b, lowerQuery); }); } /** * 检查是否匹配过滤器 */ matchesFilters(item) { // 标签过滤 if (this.activeFilters.tags.length > 0) { const hasMatchingTag = this.activeFilters.tags.some(tag => item.tags.includes(tag) ); if (!hasMatchingTag) return false; } // 分类过滤（可扩展） if (this.activeFilters.categories.length > 0) { const hasMatchingCategory = this.activeFilters.categories.some(cat => item.categories.includes(cat) ); if (!hasMatchingCategory) return false; } return true; } /** * 计算相关度分数 */ calculateRelevance(item, query) { let score = 0; // 标题匹配权重最高 if (item.title.toLowerCase().includes(query)) { score += 10; } // 标签匹配 if (item.tags.some(tag => tag.toLowerCase().includes(query))) { score += 5; } // 内容匹配 if (item.content.toLowerCase().includes(query)) { score += 1; } return score; } /** * 排序结果 */ sortResults(a, b, query) { switch (this.sortBy) { case 'date': return new Date(b.date) - new Date(a.date); case 'reading_time': return b.readingTime - a.readingTime; case 'relevance': default: return this.calculateRelevance(b, query) - this.calculateRelevance(a, query); } } /** * 显示搜索结果 */ displayResults(results) { const searchResults = document.querySelector('.search-result-show') || document.getElementById('search-result'); if (!searchResults) return; if (results.length === 0) { searchResults.innerHTML = ` 未找到匹配的结果 尝试： 使用不同的关键词 减少标签过滤器 检查拼写错误 `; return; } searchResults.innerHTML = results.map((item, index) => ` ${this.highlightText(item.title, this.currentQuery)} ${item.tags.slice(0, 3).map(tag => `${tag}` ).join('')} ${new Date(item.date).toLocaleDateString('zh-CN')} ${item.readingTime > 0 ? ` ⏱ ${item.readingTime} 分钟 ` : ''} ${item.series ? ` 📚 系列：${item.series} ` : ''} ${this.getExcerpt(item.content, this.currentQuery)} `).join(''); // 添加结果统计 const statsHTML = ` 找到 ${results.length} 个结果 ${this.activeFilters.tags.length > 0 ? ` 激活标签：${this.activeFilters.tags.join(', ')} 清除 ` : ''} `; searchResults.insertAdjacentHTML('beforebegin', statsHTML); // 绑定\"清除过滤器\"按钮 document.querySelector('.clear-filters')?.addEventListener('click', () => { this.activeFilters.tags = []; document.querySelectorAll('.filter-tag.active').forEach(el => el.classList.remove('active')); if (this.currentQuery) this.handleSearch(this.currentQuery); }); } /** * 高亮搜索关键词 */ highlightText(text, query) { if (!query) return text; const regex = new RegExp(`(${query})`, 'gi'); return text.replace(regex, '$1'); } /** * 获取摘要（截取并高亮） */ getExcerpt(content, query) { const cleanContent = content.replace(/]+>/g, ''); // 移除 HTML 标签 const index = cleanContent.toLowerCase().indexOf(query.toLowerCase()); if (index === -1) { return cleanContent.substring(0, 150) + '...'; } // 从匹配位置前后各取 50 个字符 const start = Math.max(0, index - 50); const end = Math.min(cleanContent.length, index + query.length + 50); return (start > 0 ? '...' : '') + cleanContent.substring(start, end) + (end < cleanContent.length ? '...' : ''); } /** * 显示所有结果（当搜索框为空） */ showAllResults() { // 可以显示所有文章或显示推荐文章 const sortedByDate = [...this.searchData].sort((a, b) => new Date(b.date) - new Date(a.date) ).slice(0, 10); this.displayResults(sortedByDate); } /** * 搜索历史管理 */ getSearchHistory() { try { return JSON.parse(localStorage.getItem('search_history') || '[]'); } catch { return []; } } saveToSearchHistory(query) { const history = this.getSearchHistory(); // 避免重复 const filtered = history.filter(h => h !== query); filtered.unshift(query); // 只保留最近 10 条 const trimmed = filtered.slice(0, 10); localStorage.setItem('search_history', JSON.stringify(trimmed)); } } // 初始化 if (typeof document !== 'undefined') { const enhancedSearch = new EnhancedSearch(); // DOM 加载完成后初始化 if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', () => enhancedSearch.init()); } else { enhancedSearch.init(); } }"},{"title":"标签","date":"2026-01-20T04:24:16.000Z","updated":"2026-01-20T04:24:38.837Z","comments":true,"path":"tags/index.html","permalink":"https://shiaoming123.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2026-02-11T09:08:52.124Z","updated":"2026-02-11T09:08:52.124Z","comments":true,"path":"js/reading-progress.js","permalink":"https://shiaoming123.github.io/js/reading-progress.js","excerpt":"","text":"/** * 阅读进度追踪模块 * 使用 localStorage 存储本地进度，支持 GitHub Gist 跨设备同步 */ class ReadingProgressTracker { constructor() { this.storageKey = 'blog_reading_progress'; this.syncKey = 'blog_reading_sync_config'; this.currentPostPath = this.getCurrentPostPath(); this.gistId = null; // 用户需要配置自己的 Gist ID this.gistToken = null; // 用户需要配置 GitHub Token this.syncInterval = 30000; // 30 秒同步一次 this.lastSyncTime = null; } /** * 初始化阅读进度追踪 */ init() { // 加载进度 this.loadProgress(); // 绑定滚动事件 this.bindScrollEvent(); // 检查是否配置了同步 this.checkSyncConfig(); // 如果配置了同步，启动定时同步 if (this.isSyncEnabled()) { this.startAutoSync(); } // 在页面上添加进度显示 this.addProgressBar(); this.addContinueReadingCard(); console.log('Reading progress tracker initialized'); } /** * 获取当前文章路径 */ getCurrentPostPath() { const path = window.location.pathname; // 移除末尾的 / return path.endsWith('/') ? path.slice(0, -1) : path; } /** * 绑定滚动事件 */ bindScrollEvent() { let scrollTimeout; const throttledSave = () => { this.saveProgress(); }; window.addEventListener('scroll', () => { clearTimeout(scrollTimeout); scrollTimeout = setTimeout(throttledSave, 1000); }); // 页面卸载时保存 window.addEventListener('beforeunload', () => { this.saveProgress(); }); } /** * 保存当前阅读进度 */ saveProgress() { if (!this.currentPostPath) return; const scrollTop = window.scrollY || document.documentElement.scrollTop; const scrollHeight = document.documentElement.scrollHeight; const clientHeight = window.innerHeight; const scrollPercent = Math.round((scrollTop / (scrollHeight - clientHeight)) * 100); const isCompleted = scrollPercent > 90; // 读取时长估算（简单实现） const existingData = this.getStoredData(); const lastRead = existingData[this.currentPostPath] || {}; const readingStartTime = lastRead.lastRead ? new Date(lastRead.lastRead) : new Date(); const readingTimeSeconds = Math.round((new Date() - readingStartTime) / 1000); const progressData = { scroll_percent: scrollPercent, scroll_top: scrollTop, last_read: new Date().toISOString(), is_completed: isCompleted, reading_time_seconds: (lastRead.reading_time_seconds || 0) + readingTimeSeconds }; // 更新本地存储 const allData = this.getStoredData(); allData[this.currentPostPath] = progressData; localStorage.setItem(this.storageKey, JSON.stringify(allData)); // 更新进度条 this.updateProgressBar(scrollPercent); console.log('Progress saved:', scrollPercent + '%'); } /** * 获取存储的数据 */ getStoredData() { try { return JSON.parse(localStorage.getItem(this.storageKey) || '{}'); } catch (error) { console.error('Failed to read progress data:', error); return {}; } } /** * 加载进度 */ loadProgress() { const data = this.getStoredData(); const currentData = data[this.currentPostPath]; if (currentData) { // 恢复滚动位置 if (currentData.scroll_top && !currentData.is_completed) { setTimeout(() => { window.scrollTo({ top: currentData.scroll_top, behavior: 'smooth' }); }, 500); } // 更新进度条 if (currentData.scroll_percent) { this.updateProgressBar(currentData.scroll_percent); } } } /** * 添加顶部进度条 */ addProgressBar() { // 检查是否已存在 if (document.querySelector('.reading-progress-bar')) return; const progressBar = document.createElement('div'); progressBar.className = 'reading-progress-bar'; progressBar.innerHTML = ` `; document.body.appendChild(progressBar); // 添加样式 this.injectProgressBarStyles(); } /** * 注入进度条样式 */ injectProgressBarStyles() { const style = document.createElement('style'); style.textContent = ` .reading-progress-bar { position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: rgba(0, 0, 0, 0.1); z-index: 9999; pointer-events: none; } .reading-progress-fill { height: 100%; background: linear-gradient(90deg, #49b1f5, #00c4b6); width: 0%; transition: width 0.3s ease; } .reading-progress-tooltip { position: absolute; top: -30px; right: 10px; background: #333; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; opacity: 0; transition: opacity 0.3s; } .reading-progress-bar:hover .reading-progress-tooltip { opacity: 1; } `; document.head.appendChild(style); } /** * 更新进度条 */ updateProgressBar(percent) { const fill = document.querySelector('.reading-progress-fill'); if (fill) { fill.style.width = percent + '%'; } } /** * 添加\"继续阅读\"卡片 */ addContinueReadingCard() { // 只在文章页面添加 if (!this.isPostPage()) return; const aside = document.querySelector('.aside') || document.querySelector('.sidebar'); if (!aside) return; const unreadArticles = this.getUnreadArticles(); if (unreadArticles.length === 0) return; const cardHTML = ` 📖 继续阅读 ${unreadArticles.slice(0, 5).map(article => ` ${article.title} ${article.scroll_percent || 0}% ${this.formatTimeAgo(article.last_read)} `).join('')} ${unreadArticles.length > 5 ? ` 还有 ${unreadArticles.length - 5} 篇未完成 ` : ''} `; aside.insertAdjacentHTML('afterbegin', cardHTML); // 添加样式 this.injectContinueReadingStyles(); } /** * 判断是否是文章页面 */ isPostPage() { const path = window.location.pathname; return path.startsWith('/posts/') || path.includes('/posts/'); } /** * 获取未完成的文章 */ getUnreadArticles() { const data = this.getStoredData(); return Object.entries(data) .filter(([path, progress]) => !progress.is_completed && path !== this.currentPostPath) .map(([path, progress]) => ({ path, ...progress, title: this.extractTitle(path) })) .sort((a, b) => { // 按最近阅读时间排序 return new Date(b.last_read || 0) - new Date(a.last_read || 0); }); } /** * 从路径提取标题（简化实现） */ extractTitle(path) { const data = this.getStoredData(); return data[path]?.title || path.split('/').pop().replace(/\\.html$/, '') || path; } /** * 格式化时间间隔 */ formatTimeAgo(isoString) { if (!isoString) return '未知'; const date = new Date(isoString); const now = new Date(); const diffMs = now - date; const diffMins = Math.floor(diffMs / 60000); const diffHours = Math.floor(diffMs / 3600000); const diffDays = Math.floor(diffMs / 86400000); if (diffMins < 60) { return `${diffMins} 分钟前`; } else if (diffHours < 24) { return `${diffHours} 小时前`; } else if (diffDays < 7) { return `${diffDays} 天前`; } else { return date.toLocaleDateString('zh-CN'); } } /** * 注入\"继续阅读\"卡片样式 */ injectContinueReadingStyles() { const style = document.createElement('style'); style.textContent = ` .continue-reading-card { background: #fff; border-radius: 8px; padding: 16px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .continue-reading-card h3 { margin: 0 0 12px 0; font-size: 16px; color: #333; } .unread-list { max-height: 300px; overflow-y: auto; } .unread-item { padding: 8px 0; border-bottom: 1px solid #f0f0f0; } .unread-item:last-child { border-bottom: none; } .unread-title { display: block; color: #49b1f5; text-decoration: none; font-weight: 500; margin-bottom: 4px; } .unread-title:hover { color: #00c4b6; } .unread-meta { display: flex; gap: 10px; font-size: 12px; color: #999; } .unread-percent { background: #f0f0f0; color: #333; padding: 2px 6px; border-radius: 4px; font-weight: 500; } .view-all { text-align: center; padding: 8px; color: #666; } `; document.head.appendChild(style); } /** * 检查同步配置 */ checkSyncConfig() { const config = this.getSyncConfig(); if (config.gistId && config.gistToken) { this.gistId = config.gistId; this.gistToken = config.gistToken; // 从 Gist 加载进度 this.loadFromGist(); } } /** * 获取同步配置 */ getSyncConfig() { try { return JSON.parse(localStorage.getItem(this.syncKey) || '{}'); } catch { return {}; } } /** * 是否启用了同步 */ isSyncEnabled() { return !!(this.gistId && this.gistToken); } /** * 启动自动同步 */ startAutoSync() { setInterval(() => { this.syncToGist(); }, this.syncInterval); } /** * 同步到 GitHub Gist */ async syncToGist() { if (!this.isSyncEnabled()) return; try { const data = this.getStoredData(); const response = await fetch(`https://api.github.com/gists/${this.gistId}`, { method: 'PATCH', headers: { 'Authorization': `token ${this.gistToken}`, 'Accept': 'application/vnd.github.v3+json', 'Content-Type': 'application/json' }, body: JSON.stringify({ files: { 'reading-progress.json': { content: JSON.stringify(data, null, 2), description: `Blog reading progress - Last updated: ${new Date().toISOString()}` } } }) }); if (response.ok) { this.lastSyncTime = new Date(); console.log('Synced to Gist at:', this.lastSyncTime); } else { console.error('Failed to sync to Gist:', response.status); } } catch (error) { console.error('Sync error:', error); } } /** * 从 Gist 加载进度 */ async loadFromGist() { try { const response = await fetch(`https://api.github.com/gists/${this.gistId}`, { headers: { 'Authorization': `token ${this.gistToken}`, 'Accept': 'application/vnd.github.v3+json' } }); if (response.ok) { const gist = await response.json(); const content = gist.files['reading-progress.json']?.content; if (content) { const gistData = JSON.parse(content); // 合并数据（本地优先） const localData = this.getStoredData(); const mergedData = { ...gistData, ...localData }; localStorage.setItem(this.storageKey, JSON.stringify(mergedData)); console.log('Loaded from Gist:', Object.keys(gistData).length, 'entries'); } } } catch (error) { console.error('Failed to load from Gist:', error); } } /** * 显示同步设置对话框（可选） */ showSyncSetupDialog() { const config = this.getSyncConfig(); const dialogHTML = ` 🔄 设置 Gist 同步 输入你的 GitHub Gist 信息以启用跨设备阅读进度同步 Gist ID 从 Gist URL 中获取，如：https://gist.github.com/你的gist_id GitHub Token 需要 gist 权限的 Personal Access Token 创建 Token 保存 取消 `; document.body.insertAdjacentHTML('beforeend', dialogHTML); // 注入样式 this.injectDialogStyles(); // 绑定事件 document.getElementById('save-sync-btn').addEventListener('click', () => this.saveSyncConfig()); document.getElementById('cancel-sync-btn').addEventListener('click', () => this.closeSyncDialog()); document.querySelector('.sync-dialog-overlay').addEventListener('click', () => this.closeSyncDialog()); } /** * 保存同步配置 */ saveSyncConfig() { const gistId = document.getElementById('gist-id').value.trim(); const gistToken = document.getElementById('gist-token').value.trim(); if (!gistId || !gistToken) { alert('请填写完整的 Gist ID 和 Token'); return; } const config = { gistId, gistToken }; localStorage.setItem(this.syncKey, JSON.stringify(config)); // 重新加载页面以应用配置 location.reload(); } /** * 关闭同步设置对话框 */ closeSyncDialog() { const dialog = document.getElementById('sync-setup-dialog'); const overlay = document.querySelector('.sync-dialog-overlay'); if (dialog) dialog.remove(); if (overlay) overlay.remove(); } /** * 注入对话框样式 */ injectDialogStyles() { const style = document.createElement('style'); style.textContent = ` .sync-dialog { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; display: flex; align-items: center; justify-content: center; } .sync-dialog-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); } .sync-dialog-content { background: #fff; border-radius: 12px; padding: 24px; max-width: 500px; width: 90%; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); position: relative; z-index: 10001; } .sync-dialog-content h3 { margin: 0 0 16px 0; color: #333; } .sync-dialog-desc { color: #666; margin-bottom: 20px; line-height: 1.5; } .form-group { margin-bottom: 16px; } .form-group label { display: block; font-weight: 500; margin-bottom: 8px; color: #333; } .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; } .form-input:focus { outline: none; border-color: #49b1f5; box-shadow: 0 0 0 3px rgba(73, 177, 245, 0.1); } .form-actions { display: flex; gap: 10px; margin-top: 20px; } .btn-primary, .btn-secondary { flex: 1; padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; } .btn-primary { background: #49b1f5; color: #fff; } .btn-secondary { background: #f0f0f0; color: #333; } `; document.head.appendChild(style); } } // 初始化 if (typeof document !== 'undefined') { const readingTracker = new ReadingProgressTracker(); if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', () => readingTracker.init()); } else { readingTracker.init(); } // 提供全局访问接口（用于设置同步） window.ReadingProgressTracker = ReadingProgressTracker; }"},{"title":"","date":"2026-02-11T09:09:52.108Z","updated":"2026-02-11T09:09:52.107Z","comments":true,"path":"js/article-rating.js","permalink":"https://shiaoming123.github.io/js/article-rating.js","excerpt":"","text":"/** * 文章评分系统 * 基于 Giscus Discussions 实现文章评分功能 */ class ArticleRating { constructor() { this.storageKey = 'blog_article_ratings'; this.giscusUrl = window.GISCUS_WEBSITE_URL || 'https://giscus.app'; this.repo = window.GISCUS_REPO || 'Shiaoming123/Shiaoming123.github.io'; this.currentTerm = null; // 当前文章的 discussion term this.ratings = this.getStoredRatings(); } /** * 初始化评分系统 */ init() { // 获取当前文章的 discussion term this.currentTerm = this.getCurrentDiscussionTerm(); if (this.currentTerm) { // 加载评分数据 this.loadRatings(); // 添加评分组件到页面 this.addRatingWidget(); } console.log('Article rating initialized for:', this.currentTerm); } /** * 获取当前文章的 discussion term * Giscus 使用 issue term 标识文章 */ getCurrentDiscussionTerm() { // 从 URL 或 giscus 配置中获取 const giscusScript = document.querySelector('#giscus-script'); if (giscusScript) { const src = giscusScript.getAttribute('src'); const match = src.match(/term=([^&]+)/); if (match) return decodeURIComponent(match[1]); } // 从页面 URL 获取 const urlParams = new URLSearchParams(window.location.search); return urlParams.get('term') || null; } /** * 添加评分组件 */ addRatingWidget() { // 查找插入位置（文章标题下方或评论上方） const targetLocation = this.findInsertLocation(); if (!targetLocation) return; // 计算当前评分 const rating = this.calculateRating(); const widgetHTML = ` ${this.renderStars(rating.average)} ${rating.average.toFixed(1)} 基于 ${rating.count} 条评分 为这篇文章评分 ⭐⭐⭐⭐⭐⭐ ⭐⭐⭐⭐ ⭐⭐⭐ ⭐⭐ ⭐ 点击星星后，会在评论区留下对应的 emoji 反应 评分分布 ${this.renderDistribution(rating)} `; targetLocation.insertAdjacentHTML('afterend', widgetHTML); // 绑定评分按钮事件 this.bindRatingEvents(); // 注入样式 this.injectRatingStyles(); } /** * 查找插入位置 */ findInsertLocation() { // 优先：评论区域上方 const giscusContainer = document.querySelector('.giscus-frame-wrapper'); if (giscusContainer) { return giscusContainer.parentElement; } // 次优：文章标题后 const postTitle = document.querySelector('.post-title, h1.post-title, article h1'); if (postTitle) { return postTitle.parentElement; } // 最后：文章内容后 const postContent = document.querySelector('.post-content, article.post-content'); return postContent?.parentElement; } /** * 计算评分 */ calculateRating() { const term = this.currentTerm; if (!term || !this.ratings[term]) { return { average: 0, count: 0, distribution: [0, 0, 0, 0, 0] }; } return this.ratings[term]; } /** * 渲染星星 */ renderStars(rating) { const fullStars = Math.floor(rating); const hasHalfStar = rating % 1 >= 0.5; const emptyStars = 5 - Math.ceil(rating); let stars = ''; for (let i = 0; i < 5; i++) { if (i < fullStars) { stars += '★'; } else if (hasHalfStar && i === fullStars) { stars += '★'; } else { stars += '☆'; } } return stars; } /** * 渲染评分分布 */ renderDistribution(currentRating) { const dist = currentRating.distribution || [0, 0, 0, 0, 0]; const total = currentRating.count || 1; const max = Math.max(...dist); return ` ${[5, 4, 3, 2, 1].map((star, index) => { const count = dist[index] || 0; const percent = total > 0 ? (count / total * 100) : 0; return ` ${star}星 ${count} `; }).join('')} `; } /** * 绑定评分按钮事件 */ bindRatingEvents() { document.querySelectorAll('.rating-btn').forEach(btn => { btn.addEventListener('click', async () => { const rating = parseInt(btn.getAttribute('data-rating')); await this.submitRating(rating); }); }); } /** * 提交评分 */ async submitRating(rating) { if (!this.currentTerm) { alert('无法识别当前文章'); return; } // 检查是否已评分 const userRatings = this.getUserRatings(); if (userRatings[this.currentTerm]) { alert('你已经评过分了，如需修改请删除旧的 emoji 反应后重新评分'); return; } try { // 使用 Giscus API 创建对应的 emoji 反应 // 映射：5分=👍, 4分=👀, 3分=🤔, 2分=👎, 1分=👎 const emojis = ['👍', '👀', '🤔', '👎', '👎']; const emoji = emojis[5 - rating] || '👍'; // 查找 giscus 的评论输入框或创建新评论 const commentBox = document.querySelector('.giscus-frame-wrapper') || document.querySelector('textarea.giscus-input'); if (commentBox) { // 方式1：如果有评论框，自动填入 emoji const ratingText = `我给这篇文章打了 ${rating} 星`; commentBox.value = emoji + ' ' + ratingText; // 触发提交（需要用户点击） alert('请点击\"提交\"按钮完成评分'); } else { // 方式2：通过 Discussions API 直接添加 reaction await this.addReactionToDiscussion(emoji, rating); } } catch (error) { console.error('Failed to submit rating:', error); alert('评分失败，请稍后重试'); } } /** * 添加 emoji 反应到 discussion */ async addReactionToDiscussion(emoji, rating) { const term = this.currentTerm; // 这里需要实际的 GitHub API 调用 // 由于跨域限制，这里提供简化实现 // 用户需要手动在评论区添加对应的 emoji const instructions = ` 📋 评分步骤 在评论区添加对应的 emoji：${emoji} 可选添加评语：\"我给这篇文章打了 ${rating} 星\" 点击\"提交\"按钮发布评论 💡 评分会在几分钟后自动计算到显示 `; // 显示评分指引 const widget = document.querySelector('.article-rating-widget .rating-actions'); if (widget) { widget.insertAdjacentHTML('beforebegin', instructions); setTimeout(() => { const instructionsEl = document.querySelector('.rating-instructions'); if (instructionsEl) { instructionsEl.style.background = '#e8f4fd'; instructionsEl.style.padding = '16px'; instructionsEl.style.borderRadius = '8px'; instructionsEl.style.marginBottom = '16px'; } }, 100); } } /** * 从 Giscus Discussions 加载评分数据 */ async loadRatings() { const term = this.currentTerm; if (!term) return; try { // 调用 GitHub API 获取 discussion 的 reactions const repoPath = this.repo.replace('/', '/'); const apiUrl = `https://api.github.com/repos/${repoPath}/issues`; // 由于需要分页获取所有 issues 来匹配 term // 这里简化实现，使用存储的数据 // 实际部署后需要通过 GitHub API 获取 const stored = this.ratings[term]; if (stored) { console.log('Loaded cached rating:', stored); return; } // 初始化评分记录 this.ratings[term] = { average: 0, count: 0, distribution: [0, 0, 0, 0, 0], last_updated: new Date().toISOString() }; } catch (error) { console.error('Failed to load ratings:', error); } } /** * 更新评分显示 */ updateRatingDisplay() { const rating = this.calculateRating(); const display = document.querySelector('.rating-display'); if (display) { display.innerHTML = ` ${this.renderStars(rating.average)} ${rating.average.toFixed(1)} 基于 ${rating.count} 条评分 `; } } /** * 存储评分 */ saveRating(term, rating, user) { const existing = this.ratings[term] || { average: 0, count: 0, distribution: [0,0,0,0,0] }; // 更新平均分 const newAverage = ((existing.average * existing.count) + rating) / (existing.count + 1); // 更新分布 existing.distribution[rating - 1]++; this.ratings[term] = { average: newAverage, count: existing.count + 1, distribution: existing.distribution, last_updated: new Date().toISOString() }; // 保存到 localStorage this.saveAllRatings(); // 保存用户评分记录 const userRatings = this.getUserRatings(); userRatings[term] = { rating, timestamp: new Date().toISOString() }; localStorage.setItem('user_rated_articles', JSON.stringify(userRatings)); } /** * 获取所有评分数据 */ getStoredRatings() { try { return JSON.parse(localStorage.getItem(this.storageKey) || '{}'); } catch (error) { console.error('Failed to read ratings:', error); return {}; } } /** * 保存所有评分数据 */ saveAllRatings() { localStorage.setItem(this.storageKey, JSON.stringify(this.ratings)); } /** * 获取用户评分记录 */ getUserRatings() { try { return JSON.parse(localStorage.getItem('user_rated_articles') || '{}'); } catch { return {}; } } /** * 注入评分组件样式 */ injectRatingStyles() { const style = document.createElement('style'); style.textContent = ` .article-rating-widget { background: #f8f9fa; border: 1px solid #e1e4e8; border-radius: 12px; padding: 20px; margin: 20px 0; } .rating-display { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; } .rating-stars { font-size: 24px; color: #ffc107; letter-spacing: 2px; } .rating-stars .star.full { color: #ffc107; } .rating-stars .star.half { color: #ffc107; opacity: 0.7; } .rating-stars .star.empty { color: #e0e0e0; } .rating-info { display: flex; flex-direction: column; gap: 4px; } .rating-average { font-size: 32px; font-weight: bold; color: #333; } .rating-count { font-size: 14px; color: #666; } .rating-actions { margin-bottom: 16px; } .rating-actions h4 { margin: 0 0 12px 0; font-size: 16px; color: #333; } .rating-buttons { display: flex; gap: 8px; flex-wrap: wrap; } .rating-btn { flex: 1; min-width: 120px; padding: 10px 8px; border: 1px solid #ddd; border-radius: 6px; background: #fff; cursor: pointer; transition: all 0.2s; font-size: 14px; } .rating-btn:hover { border-color: #49b1f5; background: #f0f7ff; transform: translateY(-2px); } .rating-note { font-size: 12px; color: #666; margin-top: 8px; line-height: 1.4; } .rating-distribution { margin-top: 16px; } .rating-distribution h5 { font-size: 14px; color: #333; margin: 0 0 12px 0; } .rating-bars { display: flex; flex-direction: column; gap: 8px; } .rating-bar-item { display: flex; align-items: center; gap: 8px; font-size: 12px; } .rating-bar-label { min-width: 50px; color: #666; } .rating-bar-track { flex: 1; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; } .rating-bar-fill { height: 100%; background: linear-gradient(90deg, #49b1f5, #00c4b6); transition: width 0.3s ease; } .rating-bar-count { min-width: 30px; text-align: right; color: #666; font-weight: 500; } .rating-instructions { background: #fff9c4; border-left: 4px solid #ffc107; padding: 12px 12px 12px 16px; border-radius: 4px; margin-bottom: 16px; } .rating-instructions h5 { margin: 0 0 12px 0; color: #333; } .rating-instructions ol { margin: 0; padding-left: 20px; } .rating-instructions li { margin-bottom: 8px; line-height: 1.5; } .rating-hint { margin-top: 12px; font-size: 13px; color: #49b1f5; } `; document.head.appendChild(style); } } // 初始化 if (typeof document !== 'undefined') { const articleRating = new ArticleRating(); if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', () => articleRating.init()); } else { articleRating.init(); } }"}],"posts":[{"title":"文章可见性控制演示","slug":"文章可见性控制演示","date":"2026-02-12T11:30:00.000Z","updated":"2026-02-12T06:20:56.012Z","comments":true,"path":"/posts/visibility-control-demo/","permalink":"https://shiaoming123.github.io/posts/visibility-control-demo/","excerpt":"","text":"🔒 文章可见性控制演示 无需数据库！使用 Hexo 插件系统 + JavaScript 实现密码验证 功能说明本篇文章演示了三种可见性状态： 状态 说明 适用场景 公开 所有人可见 技术分享文章 私密 仅作者可见 个人笔记、草稿 需密码 输入密码查看 会员内容、付费教程 📋 快速开始状态 1：公开文章（默认）123456789101112131415161718192021222324252627## 介绍这是一篇**公开文章**，所有人都可以看到。你可以：- ✅ 在首页看到此文章- ✅ 搜索到这篇文章- ✅ 分享链接给他人- ✅ 无需任何密码这是默认状态，无需任何配置。---## 代码示例```yaml---title: 文章可见性控制演示date: 2026-02-12 19:30:00tags: [Hexo, 教程]visibility: public---&lt;div class=&quot;tip-box&quot;&gt; 💡 &lt;strong&gt;提示：&lt;/strong&gt;不填写 &lt;code&gt;visibility&lt;/code&gt; 字段时，默认为公开&lt;/div&gt; 状态 2：私密文章123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108## 私密文章这是一篇**私密文章**，只有我能看到。**特点：**- 🔒 只有作者可见- 🚫 不在首页显示- 🚫 不会出现在搜索结果中- 🚫 不能被直接访问**适用场景：**- 个人日记- 未完成的草稿- 内部备忘录---## 代码示例```yaml---title: 我的私密日记date: 2026-02-12 18:00:00tags: [日记, 私密]visibility: private---&lt;div class=&quot;warning-box&quot;&gt; ⚠️ &lt;strong&gt;注意：&lt;/strong&gt;私密文章在本地预览时可以查看，但部署后会被完全隐藏&lt;/div&gt;---### 状态 3：需密码文章```markdown## 会员专属内容这是一篇**需密码文章**，需要输入正确的密码才能查看。**特点：**- 🔒 首页被遮罩，需要密码才能看到内容- 🛡️ 输入正确密码后显示完整文章- 📊 访问统计（需要密码的阅读次数）**适用场景：**- 付费教程- 会员专属资源- 限定分享内容---## 代码示例```yaml---title: Vue3 高级教程会员date: 2026-02-12 20:00:00tags: [Vue, 教程, 会员]password: 123456passwordHint: 提示：会员专属内容，密码是 123456visibility: password---&lt;div class=&quot;info-box&quot;&gt; ℹ️ &lt;strong&gt;信息：&lt;/strong&gt; &lt;ul&gt; &lt;li&gt;&lt;code&gt;password: 你的密码&lt;/code&gt; - 密码验证字段&lt;/li&gt; &lt;li&gt;&lt;code&gt;passwordHint: 提示信息&lt;/code&gt; - 自定义密码提示&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;**密码输入演示：**当访客打开这篇文章时：1. 首页显示密码输入框2. 输入错误密码会显示提示3. 输入正确密码（123456）后显示完整内容---## 🔧 工作原理### 实现原理&lt;div class=&quot;guide-step&quot;&gt; &lt;strong&gt;步骤 1：Hexo 过滤器&lt;/strong&gt;&lt;/div&gt;文章渲染前，Hexo 会调用 &lt;code&gt;before_post_render&lt;/code&gt; 过滤器检查 &lt;code&gt;visibility&lt;/code&gt; 字段：```javascript// visibility-control.js 中的逻辑if (visibility === &#x27;private&#x27;) &#123; return null; // 不渲染文章 // 添加密码验证界面 // 返回验证界面 HTML&#125;if (visibility === &#x27;password&#x27;) &#123; return post; // 正常渲染文章 // 添加密码验证界面 // 验证成功后显示内容&#125;if (visibility === &#x27;public&#x27; || !visibility) &#123; return post; // 正常渲染文章，不添加任何限制&#125; 步骤 2：密码验证（JavaScript） 文章存储密码：在 Front-matter 中配置 用户输入密码：前端验证 验证成功：从 sessionStorage 移除遮罩 显示完整内容：正常渲染 💡 无数据库实现： ✅ 密码存储在文章 Front-matter 中 ✅ 密码验证由前端 JavaScript 完成 ✅ 使用 sessionStorage 记住已验证会话 ✅ 完全静态，无需后端数据库 📊 效果对比 对比项 传统会员系统 Hexo 静态方案 需要数据库 ❌ 是 ✅ 否 需要后端 ❌ 是 ✅ 否 部署难度 🔴 高 🟢 低 维护成本 🔴 高 🟢 低 适合个人博客 ❌ 否 ✅ 是 🎨 样式展示本篇文章使用了密码保护界面样式，效果如下： 请输入密码 验证 提示：密码是 123456 🎯 使用方法在你的文章中添加可见性只需在 Front-matter 中添加对应字段： 123456789101112---title: 文章标题date: 2026-02-12 19:30:00tags: [标签]# 可见性设置（三选一）visibility: public # 公开（默认）# visibility: private # 私密# visibility: password # 需密码password: 123456 # 密码（需密码时必填）passwordHint: 提示信息 # 密码提示（可选）--- 推荐配置公开文章（适合大部分内容）： 12345---title: 我的公开技术博客tags: [Hexo, 教程]# visibility 可省略，默认为 public--- 私密文章（适合草稿、个人笔记）： 12345---title: 我的私密日记tags: [个人]visibility: private--- 需密码文章（适合会员内容）： 1234567---title: Vue3 源码分析会员tags: [Vue, 会员]visibility: passwordpassword: 123456passwordHint: 提示：这是会员专属内容--- ✅ 功能特性 🔒 无数据库 - 完全静态实现 ⚡ 自动化过滤 - Hexo 自动根据 visibility 处理文章 🎨 密码验证界面 - 美观的输入框和验证按钮 💾 sessionStorage - 记住已验证的会话 📱 响应式设计 - 移动端友好 🔄 密码错误提示 - 实时反馈 📝 部署清单部署前确认： 已创建可见性控制脚本（visibility-control.js） 已在 Butterfly 配置中注入脚本 已创建演示文章（三种状态） 文章中使用了自定义样式美化 🔗 相关文档 本文演示文章 OBSIDIAN_CUSTOM_STYLES_GUIDE.md - 自定义样式 PICGO_UPLOAD_GUIDE.md - PicGo 使用指南 💡 下一步建议： 创建更多测试文章，验证三种可见性状态 为现有文章添加可见性控制 调整密码验证界面样式以匹配主题 🚀 功能已上线 现在你的博客支持完整的文章可见性控制！开始创建需要密码的文章来测试吧。","categories":[{"name":"技术教程","slug":"技术教程","permalink":"https://shiaoming123.github.io/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://shiaoming123.github.io/tags/Hexo/"},{"name":"教程","slug":"教程","permalink":"https://shiaoming123.github.io/tags/%E6%95%99%E7%A8%8B/"},{"name":"Butterfly","slug":"Butterfly","permalink":"https://shiaoming123.github.io/tags/Butterfly/"},{"name":"插件","slug":"插件","permalink":"https://shiaoming123.github.io/tags/%E6%8F%92%E4%BB%B6/"},{"name":"前端开发","slug":"前端开发","permalink":"https://shiaoming123.github.io/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"}]},{"title":"Hexo 博客 + Obsidian：完美的写作组合（已应用 PicGo 自动上传）","slug":"Hexo-Obsidian博客管理指南","date":"2026-01-20T11:00:00.000Z","updated":"2026-02-12T06:27:28.344Z","comments":true,"path":"/posts/hexo-obsidian-guide/","permalink":"https://shiaoming123.github.io/posts/hexo-obsidian-guide/","excerpt":"","text":"前言作为一名技术博主，选择合适的写作工具至关重要。之前我一直在寻找一个既能完美支持 Markdown，又能方便管理文章的工具。尝试过多种方案后，最终发现了 Obsidian + Hexo 这个完美的组合。![[Obsidian + Hexo.png]]本文将详细介绍如何使用 Obsidian 管理 Hexo 博客，实现优雅、高效的写作体验。 为什么选择 Obsidian？在介绍具体配置之前，先说说为什么我选择 Obsidian 作为主要的博客写作工具。 Obsidian 的核心优势1. 本地优先，数据安全所有文章都保存在本地，完全掌控自己的数据。不用担心云端服务关闭或数据丢失。 2. Markdown 原生支持对 Markdown 的支持堪称完美，实时预览、语法高亮、数学公式等应有尽有。 3. 强大的文件管理可视化的文件列表、快速搜索、标签管理等功能，让文章管理变得轻松。 4. 丰富的插件生态社区插件众多，可以扩展各种功能，如字数统计、表格编辑、日历视图等。 5. 完全免费核心功能完全免费，没有付费墙。 与其他方案对比 特性 Obsidian hexo-admin Typora 界面美观度 ⭐⭐⭐⭐⭐ ⭐⭐ ⭐⭐⭐⭐⭐ 离线使用 ✅ ❌ ✅ 文件管理 ⭐⭐⭐⭐⭐ ⭐⭐⭐ ⭐⭐⭐ 图片处理 ⭐⭐⭐⭐⭐ ⭐⭐⭐ ⭐⭐⭐⭐ 免费程度 完全免费 免费 $14.99 准备工作在开始配置之前，确保你已经： ✅ 搭建好了 Hexo 博客 ✅ 安装了 Node.js 环境 ✅ 博客可以正常运行 安装 Obsidian方法一：官网下载（推荐） 访问 Obsidian 官网：https://obsidian.md/ 点击”Download”按钮，选择你的操作系统版本 对于 macOS 用户，下载 .dmg 文件后： 双击打开安装包 将 Obsidian 拖拽到 Applications 文件夹 启动 Obsidian 方法二：使用 Homebrew（Mac 用户）如果你使用 macOS，也可以通过 Homebrew 安装： 1brew install --cask obsidian 配置 Obsidian 连接 Hexo步骤 1：打开博客文件夹 启动 Obsidian 后，点击”打开文件夹作为仓库” 在文件选择器中，导航到你的 Hexo 博客根目录： 1/Users/你的用户名/博客路径/blog 点击”打开”按钮 Obsidian 会创建一个隐藏的 .obsidian 配置文件夹（不用担心，这个会被 .gitignore 自动忽略） 步骤 2：配置图片路径（重要！）这是最关键的一步配置，确保图片能正确保存。 点击左下角的齿轮图标打开设置（或使用快捷键 ⌘ + ,） 在左侧菜单中找到”文件与链接”选项 配置以下选项： 1234✅ 新建附件的保存位置：指定子文件夹✅ 附件文件夹路径：source/images✅ 复制到指定子文件夹✅ 更新内部链接 为什么这样配置？ 将图片保存在 source/images/ 目录 拖拽图片时自动复制到该目录 自动生成正确的 Markdown 链接：![图片名](/images/图片名.jpg) 步骤 3：配置编辑器（可选但推荐）在”编辑器”设置中，建议开启以下选项： 12345✅ 显示行号✅ 拼写检查✅ 显示缩进参考线✅ 代码块行号✅ 自动转换中文符号 步骤 4：配置外观（可选）在”外观”设置中，你可以： 选择基础颜色模式（浅色&#x2F;深色&#x2F;跟随系统） 自定义字体 选择主题 开始使用创建新文章方法一：在 Obsidian 中直接创建 在左侧文件列表中，展开 source/_posts/ 文件夹 右键点击 _posts 文件夹，选择”新建笔记” 输入文件名，例如：我的第一篇文章.md 开始编辑文章 方法二：使用 Hexo 命令创建（推荐）在终端运行： 1npx hexo new &quot;文章标题&quot; 这会在 source/_posts/ 创建带有完整 Front-matter 模板的文章： 123456---title: 文章标题date: 2026-01-20 19:00:00tags: []categories:--- 然后在 Obsidian 的文件列表中找到这个文件并开始编辑。 编辑文章Obsidian 提供了两种编辑模式： 1. 编辑模式 纯文本编辑 专注于写作 支持快捷键 2. 预览模式 实时渲染效果 显示格式化的内容 点击右上角”书本”图标切换（或使用快捷键 ⌘ + E） 3. 分屏模式 同时查看编辑和预览 使用快捷键 ⌘ + Shift + E 插入图片这是 Obsidian 最强大的功能之一！ 方法一：拖拽（最简单） 在 Finder 中找到图片文件 直接拖拽到 Obsidian 编辑器中 图片自动复制到 source/images/ 自动生成 Markdown 链接 方法二：粘贴 复制图片（⌘ + C） 在编辑器中粘贴（⌘ + V） 效果同上 方法三：使用命令 输入 ![[ 然后选择图片 Front-matter 编辑每篇文章的 Front-matter 很重要，Obsidian 完美支持 YAML 格式： 1234567891011---title: 文章标题date: 2026-01-20 19:00:00tags: [Hexo, Obsidian, 博客]categories: 技术教程comments: truetoc: truedescription: 文章描述keywords: Hexo, Obsidianpermalink: posts/article-title/ # ⚠️ 注意末尾的 /--- 重要提示： ⚠️ permalink 必须以 / 结尾，否则会导致下载源码而不是显示页面 推荐的 Obsidian 插件Obsidian 的强大之处在于丰富的插件生态。以下是我推荐的一些实用插件： 1. Advanced Tables - 表格编辑器功能： 表格自动格式化 快捷键操作表格 对齐列 安装方法：设置 → 社区插件 → 浏览 → 搜索 “Advanced Tables” → 安装 2. Word Count - 字数统计功能： 实时显示文章字数 中文字符统计 阅读时间估算 3. Calendar - 日历视图功能： 按日期查看文章 可视化发布计划 4. Dataview - 数据查询功能： 查询所有文章 按标签筛选 生成统计信息 示例查询： 12345```dataviewLISTFROM &quot;source/_posts&quot;SORT file.ctime DESC``` 完整的写作工作流使用 Obsidian 管理 Hexo 博客的完整流程如下： 日常写作流程12345678910111213141516171819# 1. 创建新文章（可选）npx hexo new &quot;文章标题&quot;# 2. 在 Obsidian 中编辑# - 打开 source/_posts/文章标题.md# - 开始写作# - 拖拽图片自动保存# 3. 本地预览（可选）npx hexo server# 浏览器访问 http://localhost:4000 查看效果# 4. 提交源码git add .git commit -m &quot;新增文章: xxx&quot;git push# 5. 部署到 GitHub Pagesnpx hexo clean &amp;&amp; npx hexo generate &amp;&amp; npx hexo deploy 工作流程图12345678910111213141516171819┌─────────────┐│ 创建文章 │ → npx hexo new &quot;标题&quot;└──────┬──────┘ ↓┌─────────────┐│ Obsidian编辑 │ → 写作、插入图片└──────┬──────┘ ↓┌─────────────┐│ 本地预览 │ → npx hexo server└──────┬──────┘ ↓┌─────────────┐│ 提交源码 │ → git add &amp; commit &amp; push└──────┬──────┘ ↓┌─────────────┐│ 部署发布 │ → hexo deploy└─────────────┘ 常见问题解答Q1: Obsidian 会修改我的文件吗？A: 不会。Obsidian 就像一个高级的文本编辑器，直接编辑你硬盘上的文件。所有更改都是实时保存的，不会生成额外文件或修改文件结构。 Q2: 如何预览 Hexo 主题的渲染效果？A: Obsidian 的预览模式显示的是 Markdown 渲染效果，但不是 Hexo 主题的样式。要查看真实效果： 1npx hexo server 然后访问 http://localhost:4000 Q3: 图片路径有问题怎么办？A: 确保按照以下配置： 附件文件夹路径：source/images 拖拽图片会自动复制到该目录 生成的链接格式：![图片名](/images/图片名.jpg) Q4: 可以在手机上编辑吗？A: 可以！Obsidian 有 iOS 和 Android 应用。通过 iCloud、Git 或其他同步工具，可以在任何设备上访问和编辑博客文章。 Q5: Obsidian 会影响 Hexo 生成吗？A: 不会。Obsidian 只是一个编辑器，不会影响 Hexo 的生成和部署过程。 进阶技巧1. 创建文章模板在 source/ 目录创建 templates/ 文件夹，创建 blog-post.md： 123456789101112131415161718192021222324252627---title: &#123;&#123;title&#125;&#125;date: &#123;&#123;date:YYYY-MM-DD HH:mm:ss&#125;&#125;tags: []categories: 技术教程comments: truetoc: truedescription:keywords:permalink: posts/&#123;&#123;title&#125;&#125;/---# &#123;&#123;title&#125;&#125;## 摘要&lt;!-- more --&gt;## 正文### 第一节### 第二节## 总结## 参考资料 然后在 Obsidian 设置中配置模板文件夹位置。 2. 使用 Dataview 生成文章索引创建一个”文章索引”笔记： 1234567# 所有文章```dataviewTABLE file.ctime as &quot;创建时间&quot;, file.tags as &quot;标签&quot;FROM &quot;source/_posts&quot;SORT file.ctime DESC``` 3. 配置 PicGo 实现图片自动上传如果你使用图床（如 GitHub、阿里云 OSS），可以安装 PicGo： 下载安装 PicGo 配置图床 在 Obsidian 中设置上传快捷键 选择图片 → 自动上传 → 插入链接 总结Obsidian + Hexo 是一个完美的博客管理组合： 优势： ✅ 界面美观，体验优雅 ✅ 完美支持 Markdown ✅ 强大的文件管理 ✅ 图片处理简单 ✅ 完全免费开源 ✅ 离线可用 ✅ 跨平台支持 核心配置： 打开博客文件夹作为仓库 配置图片路径为 source/images 开始写作 这个组合让我真正享受到了写作的乐趣，希望对你也有帮助！ 相关资源 Obsidian 官网： https://obsidian.md/ Hexo 官网： https://hexo.io/ Butterfly 主题： https://butterfly.js.org/ Obsidian 中文论坛： https://forum-zh.obsidian.md/ 相关文章： Hexo + GitHub Pages 个人博客搭建 Butterfly 主题美化指南（待写）","categories":[{"name":"技术教程","slug":"技术教程","permalink":"https://shiaoming123.github.io/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://shiaoming123.github.io/tags/Hexo/"},{"name":"教程","slug":"教程","permalink":"https://shiaoming123.github.io/tags/%E6%95%99%E7%A8%8B/"},{"name":"Obsidian","slug":"Obsidian","permalink":"https://shiaoming123.github.io/tags/Obsidian/"},{"name":"博客","slug":"博客","permalink":"https://shiaoming123.github.io/tags/%E5%8D%9A%E5%AE%A2/"}]},{"title":"Hexo+GitHub个人博客搭建","slug":"Hexo-GitHub个人博客搭建","date":"2025-06-22T15:16:08.000Z","updated":"2026-02-12T06:24:47.420Z","comments":true,"path":"/posts/hexo-github-blog-setup/","permalink":"https://shiaoming123.github.io/posts/hexo-github-blog-setup/","excerpt":"","text":"Hexo+GitHub搭建个人博客摘要：本文以up主CodeSheep从零开始搭建自己的个人博客 视频为框架，记录本人从零搭建个人博客的过程，重点表述搭建过程中遇到bug如何解决，以及补充视频没有的细节，文章以图文形式呈现。 第一章 博客环境搭建搭建设备：联想ThinkBook14P、Win11 1.1 安装Nodejs 1.2 安装hexo博客框架 1.3 使用hexo进行博客框架 1.1 Node.js安装进入https://www.nodejs.org即可进行安装对应系统版本的node.js 随后进入软件的下载界面：一路点击next，到达安装路径时确保安装路径在自己想要安装的位置自主选择是否安装时候自动安装对应的工具Tool在PowerShell控制界面中查看npm的版本，后续创建网站需要用到该包 1.2 安装hexo博客框架在刚才打开的powershell中输入npm install -g cnpm --registry=http://registry.npm.taobao.org来安装淘宝的cnpm镜像源，下载速度比较快 但是如果自己有挂vpn或者已经有其他镜像源的话可以自行决定是否进行这一步 下面时对应cnpm的版本信息 接着使用cnpm install -g hexo-cli安装hexo框架 可以使用hexo -v验证安装好的的hexo版本信息 1.3 使用hexo进行博客框架12pwd #查看当前目录mkdir blog #创建blog文件夹 这里我将blog项目文件夹放在了 E:\\Self-Web\\Sheep跟做这个目录下，之后项目有任何问题，可以直接删除blog文件夹重来。 最后在powershell中输入 cd ./blog进入我们的项目文件夹 随后输入 sudo hexo init使用超级管理员身份生成一个初始化博客 在win上应该直接输入 hexo init就可以了，会自动下载对应所需要的依赖文件 此时可以看到文件夹中生成了一些我们创建个人博客所必须的项目文件。使用 ls可以查看当前文件夹下的文件组成 启动博客输入 hexo s即可启动本地博客服务此时的本地端口访问地址是：http://localhost:4000/ 随后即可在默认浏览器中进入hexo的初始前端界面平常就是使用 hexo s进行本地环境下的个人网页测试预览常用的hexo指令如下 12345hexo n &quot;健康养生护理&quot; # 创建一篇名为“健康养生护理”的新博客hexo s # 运行hexo本地服务hexo clean # 清理本地端口页面hexo g # 生成静态文件(每次创建完一篇新博客之后都需要在项目主文件夹blog路径下输入)hexo d # 部署到远程站点 之后输入 hexo n &quot;xxx的第一篇博客文章&quot;就可以创建你的第一篇博客了 记住此时需要输入 ctrl + c结束我们的本地端口访问再输入对应指令创建博客 在得到我们的第一篇博客后，可以进入我们的 E:\\Self-Web\\Sheep跟做\\blog\\source\\_posts\\路径下查看我们新创建好的博客文档 在创建好第一篇博客文章之后，进行以下步骤完成第一次博客文章的前端页面更新： 回到我们的blog主文件夹输入两次回退指令 cd ../.. 首先输入 hexo clean清理本地端口页面和缓存 随后输入 hexo g生成新博客的静态文件 输入 hexo s本地启动我们的博客页面。 此时再启动服务之后，刷新我们的本地博客页面，即可看到我们的博客首页已经更新了。 第二章 Github远程服务器搭建目的：方便以后直接通过github这个网址直接访问我们的博客基本步骤如下： 2.1 登录Github创建项目仓库创建完成之后会出现如下界面： 其中项目命名是有对应格式要求的 2.2 安装git工具(这里我之前已经安装过了，这里就不演示了)2.3 在blog目录下安装git部署插件进入blog根目录终端输入命令行 cnpm install --save hexo-deployer-git 2.4 打开blog文件夹下的 _config.yml文件进行设置在文件的最后需要对Deployment进行相应的设置将该部分修改成如下： 12345678910# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy: type: git repo: git@github.com:Shiaoming123/Shiaoming123.github.io.git ## 这里填的是SSH地址，如果你使用HTTPS地址， ## 请将其改为：https://github.com/Shiaoming123/Shiaoming123.github.io.git ## 最好选SSH地址，因为HTTPS地址需要每次都输入用户名和密码 branch: main ## 在老版本的github中，默认分支是master 视频里填的是HTTPS地址，先说明一下如果填写那个地址以后每次部署到远端就需要输入密码登录一次，非常麻烦。填写SSH地址为的是后面免密hexo d，需要将 Mac上ssh密钥添加到GitHub上，但绝对是一劳永逸的操作！ 2.5 命令行中输入 hexo d进行部署 报错分析：显示 fatal: unable to auto-detect email address (got &#39;Wuling@DESKTOP-SKF1DTT.(none)&#39;)因为前面使用的是SSH地址，所以这里需要再加一步配置SSH连接密钥 2.5.1 Github的SSH密钥配置SSH:SSH(Secure SHell):是一个提供数据通信安全、远程登录、远程指令执行等功能的安全网络协议，使用ssh往GitHub上push项目，不需要再次输入账号密码。 设置git运行下面命令行配置自己的name和email 1git config --list #查看配置 12git config --global user.name &quot;你的用户名&quot;git config --global user.email &quot;你的邮箱&quot; Github SSH密钥配置 检查是否存在SSH Key输入 cd /.ssh和 ls查看SSH配置文件夹内的内容，若是存在 id_rsa和 id_sra.pub文件，说明已经有SSH key了，没有则创建新的 创建新的ssh key输入下面的命令行 123ssh-keygen -t rsa -C&quot;你的邮箱&quot; #-t ：密钥的类型#-C : 用于识别密钥的注释 会发现 .ssh 目录生成了两个文件：id_rsa和 id_rsa.pubid_rsa 文件是私有密钥，id_rsa.pub是公开密钥 获取ssh key公钥内容输入 cat ./id_rsa.pub获取 id_rsa.pub中的公钥内容 添加公钥到github将前面获取到的公钥添加到github中 验证是否设置成功用私有密钥与GitHub进行认证和通信 1ssh -T git@github.com 出现以下提示说明连接成功 随后返回到我们的blog主文件夹路径下，输入 hexo d即可完成远端部署 此时查看github仓库，即可发现对应文件都已装载进github对应项目仓库中 此时输入我们的域名即可进入我们的博客界面http://shiaoming123.github.io或者&lt;shiaoming123.github.io&gt; 第三章 更换blog页面主题yilia NexT butterfly 3.1 yilia主题更换1. 进入blog路径下，使用 git clone指令克隆对应项目到 blog/themes/yilia文件夹中， 1git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia 2. 打开 _config.yml文件，修改 theme对应配置为 yilia 12345# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/# theme: landscapetheme: yilia 3. 随后 hexo clean–&gt;hexo g–&gt;hexo s此时可以看到我们的页面主题已经变成了 yilia主题样式 4. 输入 hexo d将编辑好的页面推到远端github服务器 进入界面有可能不会立马生效，可以尝试刷新一下即可正常显示 第四章 图床配置在使用中我们可以发现，blog中的图片链接使用的都是基于本地当前文件夹下的相对路径，想要在我们的远端服务器中显示图片，还需要将图片也使用图床等额外配置才可以实现正常的显示功能。这里我们使用Picgo作为我们的图床使用工具。 4.1 PicGo下载Picgo下载链接：https://github.com/Molunerfinn/PicGo/releases 下载完成之后，运行exe文件选择对应的下载路径即可完成安装。 4.2 创建Github图床存储仓库在下载Picgo之后，我们还需要使用云服务器存储我们的图片文件，这里我们依旧使用github仓库作为我们图片的存储媒介。1. 创建一个新的github仓库，仓库命名随意，需要将权限设置为Public才可以正常使用，可以选择是否创建README.md文件 2. 将Picgo链接到github项目仓库打开Picgo左侧的“图床设置”中的“GitHub”，设置我们的图床配置文件按照我们前面图床仓库的相关信息填入对应框中，其中 token需要在github中获取 3. 获取token打开github的setting，在左侧的“开发者设置”中，创建一个新的 token，选择 classic 其中一些设置需要进行注意调整：Note：为该token创建一个识别名Expiration：设置该tokens的使用时长，若长期使用，可以设置为 custom来自己设置token过期时间，或者选择 No expiration无期限。随后后面的 repo对应权限需要勾选 随后创建token即可得到一串属于我们图床的token，复制粘贴到我们的PicGo的 token一栏中 随后在我们的“图片上传”处选择我们的对应github配置即可进行我们的图床配置","categories":[{"name":"前端","slug":"前端","permalink":"https://shiaoming123.github.io/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Blog","slug":"前端/Blog","permalink":"https://shiaoming123.github.io/categories/%E5%89%8D%E7%AB%AF/Blog/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://shiaoming123.github.io/tags/Hexo/"},{"name":"GitHub","slug":"GitHub","permalink":"https://shiaoming123.github.io/tags/GitHub/"},{"name":"Blog","slug":"Blog","permalink":"https://shiaoming123.github.io/tags/Blog/"},{"name":"教程","slug":"教程","permalink":"https://shiaoming123.github.io/tags/%E6%95%99%E7%A8%8B/"}],"author":"Shiaoming"}],"categories":[{"name":"技术教程","slug":"技术教程","permalink":"https://shiaoming123.github.io/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"},{"name":"前端","slug":"前端","permalink":"https://shiaoming123.github.io/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Blog","slug":"前端/Blog","permalink":"https://shiaoming123.github.io/categories/%E5%89%8D%E7%AB%AF/Blog/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://shiaoming123.github.io/tags/Hexo/"},{"name":"教程","slug":"教程","permalink":"https://shiaoming123.github.io/tags/%E6%95%99%E7%A8%8B/"},{"name":"Butterfly","slug":"Butterfly","permalink":"https://shiaoming123.github.io/tags/Butterfly/"},{"name":"插件","slug":"插件","permalink":"https://shiaoming123.github.io/tags/%E6%8F%92%E4%BB%B6/"},{"name":"前端开发","slug":"前端开发","permalink":"https://shiaoming123.github.io/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"},{"name":"Obsidian","slug":"Obsidian","permalink":"https://shiaoming123.github.io/tags/Obsidian/"},{"name":"博客","slug":"博客","permalink":"https://shiaoming123.github.io/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"GitHub","slug":"GitHub","permalink":"https://shiaoming123.github.io/tags/GitHub/"},{"name":"Blog","slug":"Blog","permalink":"https://shiaoming123.github.io/tags/Blog/"}]}